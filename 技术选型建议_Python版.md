# è¯—è¯ç¨‹åº - æŠ€æœ¯é€‰å‹å»ºè®®ï¼ˆPythonåç«¯ + AIé›†æˆï¼‰

## ä¸€ã€æŠ€æœ¯é€‰å‹å¯¹æ¯”åˆ†æ

### 1.1 å‰ç«¯æ¡†æ¶é€‰å‹

#### ç”¨æˆ·ç«¯ï¼ˆå°ç¨‹åº + H5ï¼‰

| æŠ€æœ¯æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ | æ¨èæŒ‡æ•° |
|---------|------|------|---------|---------|
| **uni-app** | - ä¸€å¥—ä»£ç å¤šç«¯è¿è¡Œï¼ˆå°ç¨‹åº+H5+APPï¼‰<br>- Vueè¯­æ³•ï¼Œå­¦ä¹ æˆæœ¬ä½<br>- ç¤¾åŒºæ´»è·ƒï¼Œæ’ä»¶ä¸°å¯Œ<br>- å®˜æ–¹ç»´æŠ¤ï¼Œæ›´æ–°åŠæ—¶ | - æ€§èƒ½ç•¥é€ŠäºåŸç”Ÿ<br>- æŸäº›ç‰¹æ®ŠåŠŸèƒ½éœ€è¦æ¡ä»¶ç¼–è¯‘<br>- å¯èƒ½é‡åˆ°å¹³å°å…¼å®¹æ€§é—®é¢˜ | **å¤šç«¯éœ€æ±‚ã€å¿«é€Ÿå¼€å‘** | â­â­â­â­â­ |
| **Taro** | - React/Vueè¯­æ³•å¯é€‰<br>- äº¬ä¸œå›¢é˜Ÿç»´æŠ¤<br>- å¤šç«¯æ”¯æŒ<br>- TypeScriptæ”¯æŒå¥½ | - å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜<br>- éƒ¨åˆ†APIéœ€è¦é€‚é…<br>- ç¤¾åŒºä¸å¦‚uni-app | ReactæŠ€æœ¯æ ˆå›¢é˜Ÿ | â­â­â­â­ |
| **åŸç”Ÿå°ç¨‹åº + Vue H5** | - å°ç¨‹åºæ€§èƒ½æœ€ä¼˜<br>- åŠŸèƒ½æœ€å®Œæ•´<br>- å®˜æ–¹æ”¯æŒæœ€å¥½ | - éœ€è¦ç»´æŠ¤ä¸¤å¥—ä»£ç <br>- å¼€å‘æˆæœ¬é«˜<br>- ä»£ç å¤ç”¨å›°éš¾ | å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„é¡¹ç›® | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šuni-app**

**ç†ç”±**ï¼š
1. ä¸€å¥—ä»£ç åŒæ—¶æ”¯æŒå°ç¨‹åºå’ŒH5ï¼Œå¤§å¹…é™ä½å¼€å‘æˆæœ¬
2. Vueè¯­æ³•ç®€å•æ˜“å­¦ï¼Œå¼€å‘æ•ˆç‡é«˜
3. ç¤¾åŒºæ´»è·ƒï¼Œé—®é¢˜å®¹æ˜“è§£å†³
4. æœªæ¥å¦‚éœ€æ‰©å±•APPï¼Œæˆæœ¬è¾ƒä½

---

#### ç®¡ç†ç«¯

| æŠ€æœ¯æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èæŒ‡æ•° |
|---------|------|------|---------|
| **Vue 3 + Element Plus** | - ç»„ä»¶ä¸°å¯Œ<br>- ä¸­æ–‡æ–‡æ¡£å®Œå–„<br>- ä¸Šæ‰‹å¿«<br>- é€‚åˆåå°ç³»ç»Ÿ | - Element Plusç›¸å¯¹è¾ƒæ–° | â­â­â­â­â­ |
| **Vue 3 + Ant Design Vue** | - ç»„ä»¶è´¨é‡é«˜<br>- è®¾è®¡è§„èŒƒ<br>- ä¼ä¸šçº§UI | - æ–‡æ¡£ç›¸å¯¹ç®€å• | â­â­â­â­â­ |
| **React + Ant Design** | - ç”Ÿæ€æœ€æˆç†Ÿ<br>- ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ<br>- æ€§èƒ½ä¼˜ç§€ | - å­¦ä¹ æ›²çº¿é™¡å³­<br>- éœ€è¦æŒæ¡Reactç”Ÿæ€ | â­â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šVue 3 + Element Plus**

---

### 1.2 åç«¯æ¡†æ¶é€‰å‹ï¼ˆPythonï¼‰â­ é‡ç‚¹

| æŠ€æœ¯æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ | æ¨èæŒ‡æ•° |
|---------|------|------|---------|---------|
| **FastAPI** | - **æ€§èƒ½æœ€ä¼˜**ï¼ˆæ¥è¿‘Node.js/Goï¼‰<br>- **è‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£**<br>- **åŸç”Ÿæ”¯æŒå¼‚æ­¥**<br>- **ç±»å‹æç¤ºï¼Œè‡ªåŠ¨éªŒè¯**<br>- **æ˜“äºé›†æˆAIæ¨¡å‹**<br>- ç°ä»£åŒ–Pythonæ¡†æ¶ | - ç›¸å¯¹è¾ƒæ–°<br>- ç¤¾åŒºä¸å¦‚Flask/Django | **APIæœåŠ¡ã€AIé¡¹ç›®ã€é«˜æ€§èƒ½** | â­â­â­â­â­ |
| **Django + DRF** | - åŠŸèƒ½æœ€å…¨ï¼ˆè‡ªå¸¦ORMã€Adminï¼‰<br>- ç”Ÿæ€æœ€æˆç†Ÿ<br>- æ–‡æ¡£å®Œå–„<br>- é€‚åˆå¤§å‹é¡¹ç›® | - é‡é‡çº§ï¼Œå¯åŠ¨æ…¢<br>- å­¦ä¹ æ›²çº¿é™¡<br>- ä¸é€‚åˆå¼‚æ­¥ | ä¼ä¸šçº§å¤§å‹é¡¹ç›® | â­â­â­â­ |
| **Flask** | - è½»é‡çµæ´»<br>- å­¦ä¹ æˆæœ¬ä½<br>- æ‰©å±•ä¸°å¯Œ | - éœ€è¦è‡ªå·±ç»„ç»‡æ¶æ„<br>- å¼‚æ­¥æ”¯æŒä¸€èˆ¬<br>- æ€§èƒ½ä¸€èˆ¬ | å°å‹é¡¹ç›®ã€å¿«é€ŸåŸå‹ | â­â­â­ |
| **Tornado** | - å¼‚æ­¥æ”¯æŒå¥½<br>- é€‚åˆé•¿è¿æ¥ | - ç”Ÿæ€è¾ƒå°<br>- å­¦ä¹ æˆæœ¬é«˜ | WebSocketå¯†é›†å‹åº”ç”¨ | â­â­â­ |
| **Sanic** | - å¼‚æ­¥é«˜æ€§èƒ½<br>- ç±»Flaskè¯­æ³• | - ç”Ÿæ€è¾ƒå°<br>- ä¸å¤Ÿç¨³å®š | é«˜æ€§èƒ½API | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šFastAPIï¼ˆå¼ºçƒˆæ¨èï¼‰**

#### FastAPI è¯¦ç»†ä¼˜åŠ¿åˆ†æ

##### 1. æ€§èƒ½å“è¶Š
```python
# æ€§èƒ½å¯¹æ¯”ï¼ˆè¯·æ±‚/ç§’ï¼‰
FastAPI (Uvicorn): ~20,000+ req/s
Django: ~2,000 req/s
Flask: ~1,500 req/s
Node.js (Express): ~25,000 req/s
```

FastAPIåŸºäºStarletteå’ŒPydanticï¼Œæ€§èƒ½æ¥è¿‘Node.jsï¼Œæ˜¯Djangoçš„10å€ï¼

##### 2. è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ
```python
# åªéœ€è¦å®šä¹‰APIï¼Œè‡ªåŠ¨ç”ŸæˆSwagger UIå’ŒReDocæ–‡æ¡£
@app.post("/users/", response_model=UserResponse)
async def create_user(user: UserCreate):
    """åˆ›å»ºç”¨æˆ·"""
    return user

# è®¿é—® /docs å³å¯çœ‹åˆ°äº¤äº’å¼APIæ–‡æ¡£
# è®¿é—® /redoc å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„æ–‡æ¡£
```

##### 3. ç±»å‹å®‰å…¨ä¸è‡ªåŠ¨éªŒè¯
```python
from pydantic import BaseModel, Field

class PoetryCreate(BaseModel):
    title: str = Field(..., min_length=1, max_length=100)
    content: str = Field(..., min_length=1)
    author_id: int = Field(..., gt=0)
    dynasty: str

    class Config:
        json_schema_extra = {
            "example": {
                "title": "é™å¤œæ€",
                "content": "åºŠå‰æ˜æœˆå…‰...",
                "author_id": 1,
                "dynasty": "å”ä»£"
            }
        }

@app.post("/poetry/")
async def create_poetry(poetry: PoetryCreate):
    # å¦‚æœå‚æ•°ä¸ç¬¦åˆç±»å‹ï¼Œè‡ªåŠ¨è¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯
    # æ— éœ€æ‰‹åŠ¨éªŒè¯ï¼ŒPydanticè‡ªåŠ¨å¤„ç†
    return poetry
```

##### 4. åŸç”Ÿå¼‚æ­¥æ”¯æŒ
```python
# æ”¯æŒå¼‚æ­¥æ•°æ®åº“æŸ¥è¯¢
@app.get("/poetry/{poetry_id}")
async def get_poetry(poetry_id: int, db: AsyncSession = Depends(get_db)):
    result = await db.execute(
        select(Poetry).where(Poetry.id == poetry_id)
    )
    return result.scalar_one_or_none()

# æ”¯æŒå¼‚æ­¥HTTPè¯·æ±‚
@app.get("/recommend/{user_id}")
async def get_recommendation(user_id: int):
    async with httpx.AsyncClient() as client:
        response = await client.get(f"http://ai-service/recommend/{user_id}")
        return response.json()
```

##### 5. ä¾èµ–æ³¨å…¥ç³»ç»Ÿ
```python
from fastapi import Depends

# æ•°æ®åº“ä¾èµ–
async def get_db():
    async with AsyncSession() as session:
        yield session

# ç”¨æˆ·è®¤è¯ä¾èµ–
async def get_current_user(token: str = Depends(oauth2_scheme)):
    user = verify_token(token)
    if not user:
        raise HTTPException(status_code=401)
    return user

# åœ¨è·¯ç”±ä¸­ä½¿ç”¨
@app.get("/profile/")
async def get_profile(
    current_user: User = Depends(get_current_user),
    db: AsyncSession = Depends(get_db)
):
    return current_user
```

##### 6. å®Œç¾é›†æˆAIæ¨¡å‹ ğŸ”¥

**è¿™æ˜¯é€‰æ‹©Pythonçš„æ ¸å¿ƒåŸå› ï¼**

```python
from transformers import pipeline
import torch

# åœ¨FastAPIä¸­åŠ è½½AIæ¨¡å‹
class AIService:
    def __init__(self):
        # è¯—è¯ç”Ÿæˆæ¨¡å‹
        self.poetry_generator = pipeline(
            "text-generation",
            model="gpt2-chinese-poetry"
        )

        # æ–‡æœ¬åˆ†ç±»æ¨¡å‹ï¼ˆè¯—è¯æœä»£åˆ†ç±»ï¼‰
        self.dynasty_classifier = pipeline(
            "text-classification",
            model="bert-base-chinese"
        )

        # æƒ…æ„Ÿåˆ†ææ¨¡å‹
        self.sentiment_analyzer = pipeline(
            "sentiment-analysis",
            model="chinese-roberta-sentiment"
        )

    async def generate_poetry(self, prompt: str, style: str):
        """AIç”Ÿæˆè¯—è¯"""
        result = self.poetry_generator(
            prompt,
            max_length=100,
            num_return_sequences=1
        )
        return result[0]['generated_text']

    async def classify_dynasty(self, poetry: str):
        """è¯†åˆ«è¯—è¯æœä»£"""
        result = self.dynasty_classifier(poetry)
        return result[0]['label']

    async def analyze_sentiment(self, text: str):
        """åˆ†æè¯—è¯æƒ…æ„Ÿ"""
        result = self.sentiment_analyzer(text)
        return result[0]

# åœ¨APIä¸­ä½¿ç”¨
ai_service = AIService()

@app.post("/ai/generate-poetry")
async def generate_poetry(request: PoetryGenerateRequest):
    poetry = await ai_service.generate_poetry(
        request.prompt,
        request.style
    )
    return {"poetry": poetry}

@app.post("/ai/classify")
async def classify_poetry(poetry: str):
    dynasty = await ai_service.classify_dynasty(poetry)
    return {"dynasty": dynasty}
```

---

### 1.3 Python ORMæ¡†æ¶é€‰å‹

| ORM | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èæŒ‡æ•° |
|-----|------|------|---------|
| **SQLAlchemy 2.0** | - **æœ€æˆç†Ÿçš„Python ORM**<br>- **æ”¯æŒå¼‚æ­¥**ï¼ˆ2.0ç‰ˆæœ¬ï¼‰<br>- åŠŸèƒ½å¼ºå¤§<br>- ä¸FastAPIé›†æˆå¥½ | - å­¦ä¹ æ›²çº¿ç¨é™¡ | â­â­â­â­â­ |
| **Tortoise ORM** | - ç±»ä¼¼Django ORM<br>- åŸç”Ÿå¼‚æ­¥<br>- ç®€å•æ˜“ç”¨ | - åŠŸèƒ½ä¸å¦‚SQLAlchemy<br>- ç¤¾åŒºè¾ƒå° | â­â­â­â­ |
| **Django ORM** | - æœ€ç®€å•<br>- åŠŸèƒ½å®Œæ•´ | - åªèƒ½ç”¨äºDjango<br>- ä¸æ”¯æŒå¼‚æ­¥ | â­â­â­ |
| **Peewee** | - è½»é‡ç®€æ´<br>- å­¦ä¹ æˆæœ¬ä½ | - åŠŸèƒ½æœ‰é™<br>- ä¸æ”¯æŒå¼‚æ­¥ | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šSQLAlchemy 2.0**

**ç¤ºä¾‹ä»£ç **ï¼š
```python
from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine
from sqlalchemy.orm import declarative_base, sessionmaker

# åˆ›å»ºå¼‚æ­¥å¼•æ“
engine = create_async_engine(
    "mysql+aiomysql://user:pass@localhost/poetry_db",
    echo=True
)

# åˆ›å»ºå¼‚æ­¥Session
async_session = sessionmaker(
    engine, class_=AsyncSession, expire_on_commit=False
)

Base = declarative_base()

# å®šä¹‰æ¨¡å‹
class Poetry(Base):
    __tablename__ = "poetry"

    id = Column(Integer, primary_key=True)
    title = Column(String(100), nullable=False)
    content = Column(Text, nullable=False)
    author_id = Column(Integer, ForeignKey("authors.id"))
    dynasty = Column(String(50))
    created_at = Column(DateTime, default=datetime.utcnow)

    # å…³ç³»
    author = relationship("Author", back_populates="poetries")
    comments = relationship("Comment", back_populates="poetry")

# å¼‚æ­¥æŸ¥è¯¢
async def get_poetry(poetry_id: int):
    async with async_session() as session:
        result = await session.execute(
            select(Poetry).where(Poetry.id == poetry_id)
        )
        return result.scalar_one_or_none()
```

---

### 1.4 æ•°æ®åº“é€‰å‹

#### å…³ç³»å‹æ•°æ®åº“

| æ•°æ®åº“ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èæŒ‡æ•° |
|--------|------|------|---------|
| **MySQL 8.0** | - å¼€æºå…è´¹<br>- ç”Ÿæ€æˆç†Ÿ<br>- æ€§èƒ½ä¼˜ç§€<br>- ç¤¾åŒºæ´»è·ƒ<br>- JSONæ”¯æŒ | - å¤æ‚æŸ¥è¯¢ä¸å¦‚PostgreSQL | â­â­â­â­â­ |
| **PostgreSQL** | - åŠŸèƒ½æœ€å¼ºå¤§<br>- JSON/JSONBæ”¯æŒæœ€å¥½<br>- é€‚åˆå¤æ‚æŸ¥è¯¢<br>- æ‰©å±•ä¸°å¯Œ | - å­¦ä¹ æˆæœ¬ç•¥é«˜<br>- è¿ç»´ç¨å¤æ‚ | â­â­â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šMySQL 8.0ï¼ˆé¦–é€‰ï¼‰æˆ– PostgreSQLï¼ˆå¤‡é€‰ï¼‰**

å¯¹äºè¯—è¯é¡¹ç›®ï¼ŒMySQL 8.0è¶³å¤Ÿä½¿ç”¨ã€‚å¦‚æœéœ€è¦å¤æ‚çš„JSONæŸ¥è¯¢æˆ–å…¨æ–‡æœç´¢ï¼Œå¯ä»¥è€ƒè™‘PostgreSQLã€‚

---

#### NoSQLæ•°æ®åº“

| æ•°æ®åº“ | ç”¨é€” | æ¨èæŒ‡æ•° |
|--------|------|---------|
| **Redis** | ç¼“å­˜ã€ä¼šè¯ã€æ’è¡Œæ¦œã€è®¡æ•°å™¨ | â­â­â­â­â­ |
| **Elasticsearch** | å…¨æ–‡æœç´¢ã€æ—¥å¿—åˆ†æ | â­â­â­â­â­ |
| **MongoDB** | éç»“æ„åŒ–æ•°æ®ã€æ—¥å¿—å­˜å‚¨ | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šRedis + Elasticsearch**

---

### 1.5 å®æ—¶é€šä¿¡æ–¹æ¡ˆï¼ˆWebSocketï¼‰

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | Pythonåº“ | æ¨èæŒ‡æ•° |
|------|------|------|---------|---------|
| **FastAPI WebSocket** | - åŸç”Ÿæ”¯æŒ<br>- ç®€å•æ˜“ç”¨<br>- å¼‚æ­¥é«˜æ•ˆ | - åŠŸèƒ½åŸºç¡€ | å†…ç½® | â­â­â­â­â­ |
| **Socket.IO (python-socketio)** | - åŠŸèƒ½ä¸°å¯Œ<br>- è‡ªåŠ¨é™çº§<br>- æˆ¿é—´ç®¡ç† | - éœ€è¦é¢å¤–ä¾èµ– | python-socketio | â­â­â­â­ |
| **Django Channels** | - Djangoå®˜æ–¹æ–¹æ¡ˆ<br>- åŠŸèƒ½å®Œæ•´ | - ä»…é€‚ç”¨Django | channels | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šFastAPIå†…ç½®WebSocket**

**ç¤ºä¾‹ä»£ç **ï¼š
```python
from fastapi import WebSocket, WebSocketDisconnect

class ConnectionManager:
    def __init__(self):
        self.active_connections: dict[int, list[WebSocket]] = {}

    async def connect(self, websocket: WebSocket, room_id: int):
        await websocket.accept()
        if room_id not in self.active_connections:
            self.active_connections[room_id] = []
        self.active_connections[room_id].append(websocket)

    async def broadcast(self, message: dict, room_id: int):
        if room_id in self.active_connections:
            for connection in self.active_connections[room_id]:
                await connection.send_json(message)

manager = ConnectionManager()

@app.websocket("/ws/game/{room_id}")
async def game_websocket(websocket: WebSocket, room_id: int):
    await manager.connect(websocket, room_id)
    try:
        while True:
            data = await websocket.receive_json()
            # å¤„ç†é£èŠ±ä»¤æ¸¸æˆé€»è¾‘
            await manager.broadcast({
                "type": "game_update",
                "data": data
            }, room_id)
    except WebSocketDisconnect:
        manager.disconnect(websocket, room_id)
```

---

### 1.6 ä»»åŠ¡é˜Ÿåˆ—

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èæŒ‡æ•° |
|------|------|------|---------|
| **Celery + Redis** | - æœ€æˆç†Ÿ<br>- åŠŸèƒ½æœ€å…¨<br>- æ”¯æŒå®šæ—¶ä»»åŠ¡ | - é…ç½®å¤æ‚ | â­â­â­â­â­ |
| **RQ (Redis Queue)** | - ç®€å•è½»é‡<br>- æ˜“äºä½¿ç”¨ | - åŠŸèƒ½è¾ƒå°‘ | â­â­â­â­ |
| **Dramatiq** | - ç°ä»£åŒ–<br>- æ€§èƒ½å¥½ | - ç¤¾åŒºè¾ƒå° | â­â­â­ |

**æ¨èæ–¹æ¡ˆï¼šCelery**

**ç”¨é€”**ï¼š
- å¼‚æ­¥å‘é€é€šçŸ¥
- å®šæ—¶ä»»åŠ¡ï¼ˆæ¯æ—¥æ¨èè¯—è¯ï¼‰
- AIæ¨¡å‹æ¨ç†ï¼ˆé¿å…é˜»å¡APIï¼‰
- æ•°æ®ç»Ÿè®¡åˆ†æ

**ç¤ºä¾‹**ï¼š
```python
from celery import Celery

celery_app = Celery(
    "poetry",
    broker="redis://localhost:6379/0",
    backend="redis://localhost:6379/0"
)

@celery_app.task
def generate_daily_recommendation():
    """æ¯æ—¥ç”Ÿæˆæ¨èè¯—è¯ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰"""
    # AIæ¨èé€»è¾‘
    pass

@celery_app.task
def analyze_poetry_sentiment(poetry_id: int):
    """å¼‚æ­¥åˆ†æè¯—è¯æƒ…æ„Ÿ"""
    # AIæƒ…æ„Ÿåˆ†æ
    pass

# å®šæ—¶ä»»åŠ¡é…ç½®
celery_app.conf.beat_schedule = {
    'daily-recommendation': {
        'task': 'generate_daily_recommendation',
        'schedule': crontab(hour=6, minute=0),  # æ¯å¤©æ—©ä¸Š6ç‚¹
    },
}
```

---

## äºŒã€æœ€ç»ˆæ¨èæŠ€æœ¯æ ˆ ğŸ¯

### â­ Python AIç‰ˆæŠ€æœ¯æ ˆï¼ˆå¼ºçƒˆæ¨èï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯å±‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å°ç¨‹åº+H5: uni-app (Vue 3 + TypeScript)        â”‚
â”‚  ç®¡ç†ç«¯: Vue 3 + Element Plus + TypeScript      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ APIè¯·æ±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åç«¯å±‚ (Python)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¡†æ¶: FastAPI (Python 3.11+)                   â”‚
â”‚  ORM: SQLAlchemy 2.0 (å¼‚æ­¥)                     â”‚
â”‚  è®¤è¯: JWT (python-jose)                        â”‚
â”‚  å®æ—¶é€šä¿¡: FastAPI WebSocket                    â”‚
â”‚  ä»»åŠ¡é˜Ÿåˆ—: Celery + Redis                       â”‚
â”‚  ğŸ¤– AIå¼•æ“: PyTorch + Transformers              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ æ•°æ®è®¿é—®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å±‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MySQL 8.0 (ä¸»æ•°æ®åº“)                           â”‚
â”‚  Redis 6+ (ç¼“å­˜ã€ä¼šè¯ã€æ¶ˆæ¯é˜Ÿåˆ—)                â”‚
â”‚  Elasticsearch 7+ (å…¨æ–‡æœç´¢)                    â”‚
â”‚  MinIO/OSS (å¯¹è±¡å­˜å‚¨ - æ¨¡å‹æ–‡ä»¶ã€å›¾ç‰‡)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ AIæ¨¡å‹å±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI/ML å±‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– è¯—è¯ç”Ÿæˆ: GPT-2ä¸­æ–‡/åƒé—®æ¨¡å‹                â”‚
â”‚  ğŸ¯ æ™ºèƒ½æ¨è: ååŒè¿‡æ»¤ + å†…å®¹æ¨è               â”‚
â”‚  ğŸ“Š æƒ…æ„Ÿåˆ†æ: RoBERTaä¸­æ–‡æƒ…æ„Ÿæ¨¡å‹               â”‚
â”‚  ğŸ·ï¸ æœä»£åˆ†ç±»: BERTæ–‡æœ¬åˆ†ç±»                      â”‚
â”‚  ğŸ” è¯­ä¹‰æœç´¢: Sentence-BERT                     â”‚
â”‚  ğŸ–¼ï¸ å›¾åƒè¯†åˆ«: OCRè¯†åˆ«å¤è¯—è¯å›¾ç‰‡                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ éƒ¨ç½²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åŸºç¡€è®¾æ–½                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®¹å™¨åŒ–: Docker + Docker Compose                â”‚
â”‚  åå‘ä»£ç†: Nginx                                â”‚
â”‚  æ¨¡å‹æœåŠ¡: TorchServe / BentoML (å¯é€‰)          â”‚
â”‚  GPUæ”¯æŒ: NVIDIA CUDA (è®­ç»ƒ/æ¨ç†åŠ é€Ÿ)           â”‚
â”‚  å¯¹è±¡å­˜å‚¨: é˜¿é‡Œäº‘OSS / MinIO                    â”‚
â”‚  CDN: é˜¿é‡Œäº‘CDN / è…¾è®¯äº‘CDN                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€AIåŠŸèƒ½è§„åˆ’ ğŸ¤–

### 3.1 æ ¸å¿ƒAIåŠŸèƒ½

#### 1. æ™ºèƒ½è¯—è¯æ¨è ğŸ¯

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šååŒè¿‡æ»¤ + å†…å®¹æ¨è + æ·±åº¦å­¦ä¹ 

```python
class RecommendationEngine:
    """æ™ºèƒ½æ¨èå¼•æ“"""

    def __init__(self):
        # ç”¨æˆ·ååŒè¿‡æ»¤æ¨¡å‹
        self.user_cf_model = self.load_user_cf_model()

        # å†…å®¹æ¨èæ¨¡å‹ï¼ˆåŸºäºè¯—è¯ç‰¹å¾ï¼‰
        self.content_model = self.load_content_model()

        # æ·±åº¦å­¦ä¹ æ¨èæ¨¡å‹
        self.deep_model = self.load_deep_model()

    async def recommend_for_user(self, user_id: int, limit: int = 10):
        """ä¸ºç”¨æˆ·æ¨èè¯—è¯"""
        # 1. è·å–ç”¨æˆ·å†å²è¡Œä¸º
        user_history = await self.get_user_history(user_id)

        # 2. ååŒè¿‡æ»¤æ¨èï¼ˆæ‰¾ç›¸ä¼¼ç”¨æˆ·å–œæ¬¢çš„è¯—è¯ï¼‰
        cf_recommendations = self.user_cf_model.predict(user_id)

        # 3. å†…å®¹æ¨èï¼ˆåŸºäºç”¨æˆ·å–œæ¬¢çš„è¯—è¯ç‰¹å¾ï¼‰
        content_recommendations = self.content_model.recommend(user_history)

        # 4. æ·±åº¦å­¦ä¹ æ¨èï¼ˆè€ƒè™‘å¤šç§ç‰¹å¾ï¼‰
        deep_recommendations = self.deep_model.predict(user_id)

        # 5. èåˆå¤šç§æ¨èç»“æœ
        final_recommendations = self.merge_recommendations(
            cf_recommendations,
            content_recommendations,
            deep_recommendations
        )

        return final_recommendations[:limit]
```

**ç‰¹å¾ç»´åº¦**ï¼š
- ç”¨æˆ·è¡Œä¸ºï¼šæµè§ˆå†å²ã€ç‚¹èµã€æ”¶è—ã€è¯„è®º
- è¯—è¯ç‰¹å¾ï¼šæœä»£ã€ä½œè€…ã€ç±»å‹ã€ä¸»é¢˜ã€æƒ…æ„Ÿ
- æ—¶é—´å› ç´ ï¼šæ—¶é—´æ®µã€èŠ‚æ—¥
- ç¤¾äº¤å› ç´ ï¼šå¥½å‹å–œå¥½ã€çƒ­é—¨è¶‹åŠ¿

---

#### 2. AIè¯—è¯ç”Ÿæˆ âœï¸

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šGPT-2ä¸­æ–‡ / é€šä¹‰åƒé—® / ChatGLM

```python
from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

class PoetryGenerator:
    """AIè¯—è¯ç”Ÿæˆå™¨"""

    def __init__(self):
        # åŠ è½½é¢„è®­ç»ƒæ¨¡å‹
        self.tokenizer = AutoTokenizer.from_pretrained("gpt2-chinese-poetry")
        self.model = AutoModelForCausalLM.from_pretrained("gpt2-chinese-poetry")
        self.device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
        self.model.to(self.device)

    async def generate_poetry(
        self,
        prompt: str,
        style: str = "äº”è¨€ç»å¥",
        dynasty: str = "å”ä»£",
        max_length: int = 100
    ) -> str:
        """
        ç”Ÿæˆè¯—è¯

        Args:
            prompt: ä¸»é¢˜/é¦–å¥
            style: è¯—è¯é£æ ¼ï¼ˆäº”è¨€ç»å¥ã€ä¸ƒè¨€å¾‹è¯—ç­‰ï¼‰
            dynasty: æœä»£é£æ ¼
            max_length: æœ€å¤§é•¿åº¦

        Returns:
            ç”Ÿæˆçš„è¯—è¯
        """
        # æ„é€ è¾“å…¥
        input_text = f"[{dynasty}][{style}]{prompt}"
        input_ids = self.tokenizer.encode(input_text, return_tensors="pt")
        input_ids = input_ids.to(self.device)

        # ç”Ÿæˆ
        with torch.no_grad():
            output = self.model.generate(
                input_ids,
                max_length=max_length,
                num_return_sequences=1,
                no_repeat_ngram_size=2,
                top_k=50,
                top_p=0.95,
                temperature=0.8,
                do_sample=True
            )

        # è§£ç 
        generated_text = self.tokenizer.decode(output[0], skip_special_tokens=True)

        # åå¤„ç†ï¼ˆå»é™¤æç¤ºè¯ï¼Œæ ¼å¼åŒ–ï¼‰
        poetry = self.post_process(generated_text, style)

        return poetry

    def post_process(self, text: str, style: str) -> str:
        """åå¤„ç†ç”Ÿæˆçš„è¯—è¯"""
        # æ ¹æ®styleæ ¼å¼åŒ–ï¼ˆæ·»åŠ æ¢è¡Œã€æ ‡ç‚¹ç­‰ï¼‰
        if "ç»å¥" in style:
            # å››å¥è¯—ï¼Œæ¯å¥æ¢è¡Œ
            lines = [text[i:i+5] for i in range(0, 20, 5)]
            return "\n".join(lines)
        # ... å…¶ä»–æ ¼å¼
        return text

# åœ¨APIä¸­ä½¿ç”¨
poetry_generator = PoetryGenerator()

@app.post("/ai/generate")
async def generate_poetry(request: PoetryGenerateRequest):
    """AIç”Ÿæˆè¯—è¯"""
    poetry = await poetry_generator.generate_poetry(
        prompt=request.prompt,
        style=request.style,
        dynasty=request.dynasty
    )
    return {
        "poetry": poetry,
        "prompt": request.prompt,
        "style": request.style
    }
```

**åº”ç”¨åœºæ™¯**ï¼š
- ç”¨æˆ·è¾“å…¥ä¸»é¢˜ï¼ŒAIåˆ›ä½œè¯—è¯
- ç»­å†™è¯—å¥
- é£èŠ±ä»¤AIå¯¹æ‰‹
- è¯—è¯æ”¹å†™/ä»¿å†™

---

#### 3. è¯—è¯æƒ…æ„Ÿåˆ†æ ğŸ˜ŠğŸ˜¢

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šRoBERTaä¸­æ–‡æƒ…æ„Ÿæ¨¡å‹

```python
from transformers import pipeline

class SentimentAnalyzer:
    """è¯—è¯æƒ…æ„Ÿåˆ†æ"""

    def __init__(self):
        self.analyzer = pipeline(
            "sentiment-analysis",
            model="hfl/chinese-roberta-wwm-ext-large"
        )

    async def analyze(self, poetry: str) -> dict:
        """
        åˆ†æè¯—è¯æƒ…æ„Ÿ

        Returns:
            {
                "emotion": "å–œæ‚¦/æ‚²ä¼¤/æ„¤æ€’/ææƒ§/çˆ±æƒ…/æ€ä¹¡",
                "score": 0.95,
                "keywords": ["æ˜æœˆ", "æ€ä¹¡"],
                "description": "è¿™é¦–è¯—è¡¨è¾¾äº†è¯—äººå¯¹æ•…ä¹¡çš„æ€å¿µä¹‹æƒ…"
            }
        """
        # åŸºç¡€æƒ…æ„Ÿåˆ†æ
        result = self.analyzer(poetry)[0]

        # æå–å…³é”®è¯
        keywords = self.extract_keywords(poetry)

        # ç”Ÿæˆæè¿°
        description = self.generate_description(poetry, result, keywords)

        return {
            "emotion": self.map_emotion(result['label']),
            "score": result['score'],
            "keywords": keywords,
            "description": description
        }

@app.post("/ai/analyze-sentiment")
async def analyze_sentiment(poetry: str):
    """åˆ†æè¯—è¯æƒ…æ„Ÿ"""
    analyzer = SentimentAnalyzer()
    result = await analyzer.analyze(poetry)
    return result
```

**åº”ç”¨åœºæ™¯**ï¼š
- è¯—è¯è¯¦æƒ…é¡µå±•ç¤ºæƒ…æ„Ÿæ ‡ç­¾
- æŒ‰æƒ…æ„Ÿç­›é€‰è¯—è¯
- æƒ…æ„Ÿæ¨èï¼ˆæ ¹æ®ç”¨æˆ·æƒ…ç»ªæ¨èï¼‰

---

#### 4. æœä»£/ä½œè€…è¯†åˆ« ğŸ›ï¸

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šBERTæ–‡æœ¬åˆ†ç±»

```python
class DynastyClassifier:
    """æœä»£è¯†åˆ«"""

    def __init__(self):
        self.model = pipeline(
            "text-classification",
            model="bert-base-chinese-dynasty"
        )

    async def classify(self, poetry: str) -> dict:
        """
        è¯†åˆ«è¯—è¯æœä»£

        Returns:
            {
                "dynasty": "å”ä»£",
                "confidence": 0.92,
                "possible_authors": ["æç™½", "æœç”«", "ç‹ç»´"]
            }
        """
        result = self.model(poetry)[0]
        dynasty = result['label']
        confidence = result['score']

        # æ ¹æ®æœä»£å’Œé£æ ¼æ¨æµ‹å¯èƒ½çš„ä½œè€…
        possible_authors = await self.predict_authors(poetry, dynasty)

        return {
            "dynasty": dynasty,
            "confidence": confidence,
            "possible_authors": possible_authors
        }
```

**åº”ç”¨åœºæ™¯**ï¼š
- ç”¨æˆ·ä¸Šä¼ è¯—è¯ï¼Œè‡ªåŠ¨è¯†åˆ«æœä»£
- è¯—è¯çŸ¥è¯†é—®ç­”æ¸¸æˆ
- è¾…åŠ©å†…å®¹å®¡æ ¸

---

#### 5. è¯­ä¹‰æœç´¢ ğŸ”

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šSentence-BERT + å‘é‡æ£€ç´¢

```python
from sentence_transformers import SentenceTransformer
import faiss
import numpy as np

class SemanticSearch:
    """è¯­ä¹‰æœç´¢å¼•æ“"""

    def __init__(self):
        # åŠ è½½æ¨¡å‹
        self.model = SentenceTransformer('paraphrase-multilingual-MiniLM-L12-v2')

        # åŠ è½½è¯—è¯å‘é‡ç´¢å¼•
        self.index = faiss.read_index("poetry_vectors.index")

        # è¯—è¯IDæ˜ å°„
        self.id_mapping = self.load_id_mapping()

    async def search(self, query: str, limit: int = 10) -> list:
        """
        è¯­ä¹‰æœç´¢

        Args:
            query: æœç´¢å…³é”®è¯ï¼ˆå¦‚"æ€å¿µæ•…ä¹¡çš„è¯—"ï¼‰

        Returns:
            ç›¸å…³è¯—è¯åˆ—è¡¨
        """
        # å°†æŸ¥è¯¢è½¬ä¸ºå‘é‡
        query_vector = self.model.encode([query])[0]

        # å‘é‡æ£€ç´¢
        distances, indices = self.index.search(
            np.array([query_vector]),
            limit
        )

        # è·å–è¯—è¯ä¿¡æ¯
        poetry_ids = [self.id_mapping[idx] for idx in indices[0]]
        poetries = await self.get_poetries_by_ids(poetry_ids)

        return poetries

@app.get("/search/semantic")
async def semantic_search(query: str, limit: int = 10):
    """è¯­ä¹‰æœç´¢"""
    search_engine = SemanticSearch()
    results = await search_engine.search(query, limit)
    return results
```

**åº”ç”¨åœºæ™¯**ï¼š
- "è¡¨è¾¾æ€ä¹¡ä¹‹æƒ…çš„è¯—" â†’ è‡ªåŠ¨æ‰¾åˆ°ç›¸å…³è¯—è¯
- "æå†™æ˜¥å¤©çš„è¯" â†’ è¯­ä¹‰åŒ¹é…
- æ¯”å…³é”®è¯æœç´¢æ›´æ™ºèƒ½

---

#### 6. OCRè¯†åˆ«å¤è¯—è¯å›¾ç‰‡ ğŸ“·

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼šPaddleOCR / Tesseract

```python
from paddleocr import PaddleOCR

class PoetryOCR:
    """è¯—è¯å›¾ç‰‡è¯†åˆ«"""

    def __init__(self):
        self.ocr = PaddleOCR(use_angle_cls=True, lang='ch')

    async def recognize(self, image_path: str) -> dict:
        """
        è¯†åˆ«å›¾ç‰‡ä¸­çš„è¯—è¯

        Returns:
            {
                "text": "åºŠå‰æ˜æœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœ...",
                "lines": ["åºŠå‰æ˜æœˆå…‰", "ç–‘æ˜¯åœ°ä¸Šéœœ", ...],
                "confidence": 0.95,
                "matched_poetry": {è¯—è¯ä¿¡æ¯}
            }
        """
        # OCRè¯†åˆ«
        result = self.ocr.ocr(image_path, cls=True)

        # æå–æ–‡æœ¬
        lines = []
        for line in result:
            for word_info in line:
                lines.append(word_info[1][0])

        text = "".join(lines)

        # åœ¨æ•°æ®åº“ä¸­åŒ¹é…è¯—è¯
        matched_poetry = await self.match_poetry(text)

        return {
            "text": text,
            "lines": lines,
            "confidence": self.calculate_confidence(result),
            "matched_poetry": matched_poetry
        }

@app.post("/ai/ocr")
async def recognize_poetry_image(file: UploadFile):
    """è¯†åˆ«è¯—è¯å›¾ç‰‡"""
    # ä¿å­˜ä¸Šä¼ çš„å›¾ç‰‡
    image_path = await save_upload_file(file)

    # OCRè¯†åˆ«
    ocr = PoetryOCR()
    result = await ocr.recognize(image_path)

    return result
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ‹ç…§è¯†è¯—
- è¯†åˆ«ä¹¦æ³•ä½œå“
- è¾…åŠ©å½•å…¥è¯—è¯

---

### 3.2 AIåŠŸèƒ½çš„ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·è¯·æ±‚
    â†“
FastAPIæ¥å£
    â†“
ä»»åŠ¡åˆ†å‘
    â”œâ”€â†’ [è½»é‡ä»»åŠ¡] ç›´æ¥å¤„ç† (æƒ…æ„Ÿåˆ†æã€åˆ†ç±»ç­‰)
    â””â”€â†’ [é‡é‡ä»»åŠ¡] Celeryå¼‚æ­¥å¤„ç† (è¯—è¯ç”Ÿæˆã€è®­ç»ƒç­‰)
            â†“
        AIæ¨¡å‹æ¨ç†
            â”œâ”€â†’ CPUæ¨ç† (è½»é‡æ¨¡å‹)
            â””â”€â†’ GPUæ¨ç† (å¤§æ¨¡å‹ï¼Œä½¿ç”¨TorchServe)
                â†“
            ç»“æœç¼“å­˜ (Redis)
                â†“
            è¿”å›ç»“æœ
```

---

## å››ã€æ ¸å¿ƒä¾èµ–åŒ…

### 4.1 åç«¯ï¼ˆFastAPIï¼‰

```txt
# requirements.txt

# Webæ¡†æ¶
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6

# æ•°æ®åº“
sqlalchemy==2.0.23
aiomysql==0.2.0
alembic==1.12.1  # æ•°æ®åº“è¿ç§»

# Redis
redis==5.0.1
aioredis==2.0.1

# è®¤è¯
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6

# ä»»åŠ¡é˜Ÿåˆ—
celery==5.3.4
redis==5.0.1

# Elasticsearch
elasticsearch==8.11.0

# å¾®ä¿¡ç›¸å…³
pycryptodome==3.19.0
requests==2.31.0

# AI/MLæ ¸å¿ƒåº“
torch==2.1.0
transformers==4.35.0
sentence-transformers==2.2.2
scikit-learn==1.3.2
numpy==1.24.3
pandas==2.1.3

# OCR
paddleocr==2.7.0
paddlepaddle==2.5.1

# å›¾åƒå¤„ç†
Pillow==10.1.0
opencv-python==4.8.1

# å‘é‡æ£€ç´¢
faiss-cpu==1.7.4  # æˆ– faiss-gpu

# å·¥å…·åº“
pydantic==2.5.0
pydantic-settings==2.1.0
python-dotenv==1.0.0
httpx==0.25.1
aiofiles==23.2.1

# å¼€å‘å·¥å…·
pytest==7.4.3
pytest-asyncio==0.21.1
black==23.11.0
flake8==6.1.0
mypy==1.7.1
```

### 4.2 å‰ç«¯

```json
// å‰ç«¯ä¾èµ–ä¸ä¹‹å‰ç›¸åŒï¼Œæ— éœ€æ›´æ”¹
{
  "dependencies": {
    "vue": "^3.3.0",
    "@dcloudio/uni-app": "^3.0.0",
    "pinia": "^2.1.0",
    "axios": "^1.4.0"
  }
}
```

---

## äº”ã€å¼€å‘ç¯å¢ƒæ­å»º

### 5.1 Pythonç¯å¢ƒ

```bash
# 1. å®‰è£…Python 3.11+ï¼ˆæ¨èä½¿ç”¨pyenvï¼‰
pyenv install 3.11.6
pyenv global 3.11.6
python --version  # Python 3.11.6

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# 3. å‡çº§pip
pip install --upgrade pip

# 4. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 5. å®‰è£…GPUç‰ˆPyTorchï¼ˆå¦‚æœæœ‰GPUï¼‰
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

### 5.2 æ•°æ®åº“

```bash
# MySQL
mysql --version

# Redis
redis-server --version

# Elasticsearch
curl -X GET "localhost:9200"
```

### 5.3 è¿è¡Œé¡¹ç›®

```bash
# å¯åŠ¨FastAPIæœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# å¯åŠ¨Celery Worker
celery -A app.tasks.celery_app worker --loglevel=info

# å¯åŠ¨Celery Beatï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
celery -A app.tasks.celery_app beat --loglevel=info
```

---

## å…­ã€é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆPythonåç«¯ï¼‰

```
server/  (Python FastAPI)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ main.py                 # FastAPIåº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ security.py         # å®‰å…¨ç›¸å…³ï¼ˆJWTã€å¯†ç ï¼‰
â”‚   â”‚   â””â”€â”€ database.py         # æ•°æ®åº“è¿æ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹ï¼ˆSQLAlchemyï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ poetry.py           # è¯—è¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ comment.py          # è¯„è®ºæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ post.py             # å¹¿åœºæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ game.py             # æ¸¸æˆæ¨¡å‹
â”‚   â”‚   â””â”€â”€ message.py          # æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                # Pydanticæ¨¡å‹ï¼ˆAPIæ•°æ®éªŒè¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ poetry.py
â”‚   â”‚   â”œâ”€â”€ comment.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ deps.py             # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â””â”€â”€ v1/                 # APIç‰ˆæœ¬1
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ auth.py         # è®¤è¯æ¥å£
â”‚   â”‚       â”œâ”€â”€ users.py        # ç”¨æˆ·æ¥å£
â”‚   â”‚       â”œâ”€â”€ poetry.py       # è¯—è¯æ¥å£
â”‚   â”‚       â”œâ”€â”€ comments.py     # è¯„è®ºæ¥å£
â”‚   â”‚       â”œâ”€â”€ square.py       # å¹¿åœºæ¥å£
â”‚   â”‚       â”œâ”€â”€ game.py         # æ¸¸æˆæ¥å£
â”‚   â”‚       â”œâ”€â”€ ai.py           # AIæ¥å£ ğŸ¤–
â”‚   â”‚       â””â”€â”€ admin.py        # ç®¡ç†æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”œâ”€â”€ poetry_service.py
â”‚   â”‚   â”œâ”€â”€ comment_service.py
â”‚   â”‚   â”œâ”€â”€ search_service.py   # Elasticsearchæœç´¢
â”‚   â”‚   â””â”€â”€ ai_service.py       # AIæœåŠ¡ ğŸ¤–
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                     # AIæ¨¡å— ğŸ¤–
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ recommender.py      # æ¨èå¼•æ“
â”‚   â”‚   â”œâ”€â”€ generator.py        # è¯—è¯ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ sentiment.py        # æƒ…æ„Ÿåˆ†æ
â”‚   â”‚   â”œâ”€â”€ classifier.py       # åˆ†ç±»æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ semantic_search.py  # è¯­ä¹‰æœç´¢
â”‚   â”‚   â”œâ”€â”€ ocr.py              # OCRè¯†åˆ«
â”‚   â”‚   â””â”€â”€ models/             # æ¨¡å‹æ–‡ä»¶ç›®å½•
â”‚   â”‚       â”œâ”€â”€ gpt2-poetry/
â”‚   â”‚       â”œâ”€â”€ bert-classifier/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                  # Celeryå¼‚æ­¥ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ celery_app.py       # Celeryé…ç½®
â”‚   â”‚   â”œâ”€â”€ ai_tasks.py         # AIå¼‚æ­¥ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ email_tasks.py      # é‚®ä»¶ä»»åŠ¡
â”‚   â”‚   â””â”€â”€ schedule_tasks.py   # å®šæ—¶ä»»åŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ websocket/              # WebSocket
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ manager.py          # è¿æ¥ç®¡ç†
â”‚   â”‚   â””â”€â”€ game_handler.py     # æ¸¸æˆå¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ wechat.py           # å¾®ä¿¡API
â”‚   â”‚   â”œâ”€â”€ redis_client.py     # Rediså®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ oss.py              # å¯¹è±¡å­˜å‚¨
â”‚   â”‚   â””â”€â”€ helpers.py          # è¾…åŠ©å‡½æ•°
â”‚   â”‚
â”‚   â””â”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ cors.py             # CORS
â”‚       â”œâ”€â”€ rate_limit.py       # é™æµ
â”‚       â””â”€â”€ logging.py          # æ—¥å¿—
â”‚
â”œâ”€â”€ alembic/                    # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ versions/
â”‚   â””â”€â”€ env.py
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•
â”‚   â”œâ”€â”€ test_api/
â”‚   â”œâ”€â”€ test_services/
â”‚   â””â”€â”€ test_ai/
â”‚
â”œâ”€â”€ scripts/                    # è„šæœ¬
â”‚   â”œâ”€â”€ import_poetry.py        # å¯¼å…¥è¯—è¯æ•°æ®
â”‚   â”œâ”€â”€ train_model.py          # è®­ç»ƒAIæ¨¡å‹
â”‚   â””â”€â”€ init_db.py              # åˆå§‹åŒ–æ•°æ®åº“
â”‚
â”œâ”€â”€ requirements.txt            # ä¾èµ–åŒ…
â”œâ”€â”€ requirements-dev.txt        # å¼€å‘ä¾èµ–
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.example
â”œâ”€â”€ alembic.ini                 # Alembicé…ç½®
â”œâ”€â”€ pytest.ini                  # Pytesté…ç½®
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

## ä¸ƒã€å¼€å‘å·¥å…·æ¨è

### 7.1 IDE

| å·¥å…· | æ¨èç”¨é€” | æ¨èæŒ‡æ•° |
|------|---------|---------|
| **PyCharm Professional** | Pythonå¼€å‘é¦–é€‰ï¼ŒåŠŸèƒ½æœ€å¼º | â­â­â­â­â­ |
| **VS Code + Pythonæ’ä»¶** | è½»é‡çº§ï¼Œå…è´¹ | â­â­â­â­â­ |
| **Jupyter Notebook** | AIæ¨¡å‹å®éªŒã€æ•°æ®åˆ†æ | â­â­â­â­â­ |

**VS Codeæ¨èæ’ä»¶**ï¼š
```
- Python (Microsoft)
- Pylance (ç±»å‹æ£€æŸ¥)
- Black Formatter (ä»£ç æ ¼å¼åŒ–)
- Ruff (ä»£ç æ£€æŸ¥)
- autoDocstring (è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å­—ç¬¦ä¸²)
- GitLens
- Thunder Client (APIæµ‹è¯•)
```

---

### 7.2 AI/MLå¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” | æ¨èæŒ‡æ•° |
|------|------|---------|
| **Jupyter Lab** | æ¨¡å‹å®éªŒã€æ•°æ®åˆ†æ | â­â­â­â­â­ |
| **TensorBoard** | æ¨¡å‹è®­ç»ƒå¯è§†åŒ– | â­â­â­â­â­ |
| **Weights & Biases** | å®éªŒç®¡ç†ã€æ¨¡å‹å¯¹æ¯” | â­â­â­â­â­ |
| **HuggingFace Hub** | é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½ | â­â­â­â­â­ |

---

## å…«ã€AIæ¨¡å‹èµ„æº

### 8.1 æ¨èçš„é¢„è®­ç»ƒæ¨¡å‹

#### è¯—è¯ç”Ÿæˆ
- **GPT2-Chinese-Poetry**: https://huggingface.co/uer/gpt2-chinese-poetry
- **ChatGLM-6B**: https://huggingface.co/THUDM/chatglm-6b
- **é€šä¹‰åƒé—®**: https://github.com/QwenLM/Qwen

#### æ–‡æœ¬åˆ†ç±»/æƒ…æ„Ÿåˆ†æ
- **Chinese-RoBERTa**: https://huggingface.co/hfl/chinese-roberta-wwm-ext
- **BERT-Base-Chinese**: https://huggingface.co/bert-base-chinese

#### è¯­ä¹‰æœç´¢
- **Sentence-BERTä¸­æ–‡**: https://huggingface.co/shibing624/text2vec-base-chinese

#### OCR
- **PaddleOCR**: https://github.com/PaddlePaddle/PaddleOCR

### 8.2 è®­ç»ƒæ•°æ®é›†

- **Chinese-Poetryæ•°æ®é›†**: https://github.com/chinese-poetry/chinese-poetry
  - 5.5ä¸‡é¦–å”è¯—
  - 26ä¸‡é¦–å®‹è¯—
  - 2.1ä¸‡é¦–å®‹è¯

---

## ä¹ã€éƒ¨ç½²æ–¹æ¡ˆ

### 9.1 Dockeréƒ¨ç½²

```yaml
# docker-compose.yml
version: '3.8'

services:
  # FastAPIåº”ç”¨
  api:
    build: ./server
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=mysql+aiomysql://user:pass@mysql:3306/poetry_db
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - mysql
      - redis
    volumes:
      - ./server:/app
      - ai_models:/app/models  # AIæ¨¡å‹æŒä¹…åŒ–
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]  # GPUæ”¯æŒ

  # Celery Worker
  celery_worker:
    build: ./server
    command: celery -A app.tasks.celery_app worker --loglevel=info
    depends_on:
      - redis
      - mysql
    volumes:
      - ./server:/app
      - ai_models:/app/models

  # Celery Beat
  celery_beat:
    build: ./server
    command: celery -A app.tasks.celery_app beat --loglevel=info
    depends_on:
      - redis

  # MySQL
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: poetry_db
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  # Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # Elasticsearch
  elasticsearch:
    image: elasticsearch:8.11.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  # Nginx
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
    depends_on:
      - api

volumes:
  mysql_data:
  redis_data:
  es_data:
  ai_models:  # AIæ¨¡å‹å­˜å‚¨
```

### 9.2 GPUæœåŠ¡å™¨é…ç½®å»ºè®®

**AIæ¨¡å‹æ¨ç†æœåŠ¡å™¨**ï¼š
- CPU: 8æ ¸+
- å†…å­˜: 32GB+
- GPU: NVIDIA RTX 3060 (12GB) æˆ–æ›´é«˜
- å­˜å‚¨: 500GB+ SSD
- ç³»ç»Ÿ: Ubuntu 22.04 LTS

**æ— GPUæ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨CPUæ¨ç†ï¼ˆé€Ÿåº¦è¾ƒæ…¢ï¼‰
- ä½¿ç”¨äº‘æœåŠ¡å•†çš„AIæ¨ç†æœåŠ¡ï¼š
  - é˜¿é‡Œäº‘PAI
  - è…¾è®¯äº‘TI-EMS
  - AWS SageMaker

---

## åã€æˆæœ¬ä¼°ç®—ï¼ˆå«AIï¼‰

### 10.1 æœåŠ¡å™¨æˆæœ¬ï¼ˆæœˆï¼‰

| é¡¹ç›® | é…ç½® | ä»·æ ¼ |
|------|------|------|
| **WebæœåŠ¡å™¨** | 2æ ¸4G | 100-200å…ƒ |
| **AIæ¨ç†æœåŠ¡å™¨** | 8æ ¸32G + GPU | 1000-2000å…ƒ |
| **MySQL** | 1æ ¸2G | 50-100å…ƒ |
| **Redis** | 256MB | 30-50å…ƒ |
| **OSSå­˜å‚¨** | 20GB + æµé‡ | 20-50å…ƒ |
| **GPUäº‘æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰** | NVIDIA T4 | 3-5å…ƒ/å°æ—¶ |

**æ€»è®¡**ï¼šçº¦ **1200-2400å…ƒ/æœˆ**ï¼ˆå«GPUï¼‰
**æ— GPUæ–¹æ¡ˆ**ï¼šçº¦ **200-400å…ƒ/æœˆ**

### 10.2 AIæœåŠ¡æˆæœ¬ä¼˜åŒ–

1. **æ¨¡å‹å‹ç¼©**ï¼šä½¿ç”¨é‡åŒ–ã€å‰ªæå‡å°æ¨¡å‹å¤§å°
2. **æ¨¡å‹ç¼“å­˜**ï¼šä½¿ç”¨Redisç¼“å­˜å¸¸è§ç»“æœ
3. **æŒ‰éœ€å¯åŠ¨**ï¼šä½å³°æœŸåœæ­¢GPUæœåŠ¡å™¨
4. **æ‰¹é‡æ¨ç†**ï¼šåˆå¹¶å¤šä¸ªè¯·æ±‚æ‰¹é‡å¤„ç†
5. **ä½¿ç”¨å°æ¨¡å‹**ï¼šä¼˜å…ˆä½¿ç”¨è½»é‡çº§æ¨¡å‹

---

## åä¸€ã€æ€»ç»“ä¸å»ºè®®

### âœ… æœ€ç»ˆæŠ€æœ¯æ ˆ

```
ğŸ¯ å‰ç«¯
â”œâ”€ uni-app (Vue 3 + TypeScript)
â””â”€ Vue 3 + Element Plus

ğŸ¯ åç«¯ (Python 3.11+)
â”œâ”€ FastAPI (é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶)
â”œâ”€ SQLAlchemy 2.0 (å¼‚æ­¥ORM)
â”œâ”€ Celery (ä»»åŠ¡é˜Ÿåˆ—)
â””â”€ WebSocket (å®æ—¶é€šä¿¡)

ğŸ¯ æ•°æ®å±‚
â”œâ”€ MySQL 8.0 (ä¸»æ•°æ®åº“)
â”œâ”€ Redis 6+ (ç¼“å­˜)
â””â”€ Elasticsearch (æœç´¢)

ğŸ¤– AI/MLå±‚
â”œâ”€ PyTorch (æ·±åº¦å­¦ä¹ æ¡†æ¶)
â”œâ”€ Transformers (é¢„è®­ç»ƒæ¨¡å‹)
â”œâ”€ Sentence-BERT (è¯­ä¹‰æœç´¢)
â””â”€ PaddleOCR (OCRè¯†åˆ«)
```

### ğŸ“Š é€‰æ‹©Pythonçš„æ ¸å¿ƒä¼˜åŠ¿

1. **AIç”Ÿæ€æœ€å¼º**ï¼šPyTorchã€TensorFlowã€HuggingFaceç­‰
2. **å¼€å‘æ•ˆç‡é«˜**ï¼šä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤
3. **æ¨¡å‹ä¸°å¯Œ**ï¼šæµ·é‡é¢„è®­ç»ƒæ¨¡å‹å¯ç›´æ¥ä½¿ç”¨
4. **ç¤¾åŒºæ´»è·ƒ**ï¼šAI/MLé—®é¢˜å®¹æ˜“è§£å†³
5. **æ‰©å±•æ€§å¼º**ï¼šä»åŸå‹åˆ°ç”Ÿäº§æ— ç¼è¿‡æ¸¡

### ğŸš€ MVPå¼€å‘ä¼˜å…ˆçº§

**ç¬¬ä¸€é˜¶æ®µï¼ˆ4-6å‘¨ï¼‰**ï¼š
1. åŸºç¡€åŠŸèƒ½ï¼ˆç”¨æˆ·ã€è¯—è¯ã€æœç´¢ï¼‰
2. ç®€å•æ¨èï¼ˆåŸºäºçƒ­åº¦ï¼‰

**ç¬¬äºŒé˜¶æ®µï¼ˆ3-4å‘¨ï¼‰**ï¼š
3. ç¤¾äº¤åŠŸèƒ½ï¼ˆè¯„è®ºã€ç‚¹èµã€å…³æ³¨ï¼‰
4. æ™ºèƒ½æ¨èï¼ˆAIï¼‰

**ç¬¬ä¸‰é˜¶æ®µï¼ˆ4-5å‘¨ï¼‰**ï¼š
5. AIç”Ÿæˆè¯—è¯
6. æƒ…æ„Ÿåˆ†æ
7. é£èŠ±ä»¤æ¸¸æˆ

### ğŸ’¡ AIé›†æˆå»ºè®®

1. **é€æ­¥å¼•å…¥**ï¼šå…ˆç”¨ç®€å•ç®—æ³•ï¼Œå†ä¸ŠAI
2. **ç¦»çº¿è®­ç»ƒ**ï¼šæ¨¡å‹è®­ç»ƒåœ¨æœ¬åœ°/äº‘ç«¯è¿›è¡Œ
3. **åœ¨çº¿æ¨ç†**ï¼šéƒ¨ç½²è½»é‡æ¨¡å‹å®æ—¶é¢„æµ‹
4. **ç›‘æ§è¯„ä¼°**ï¼šæŒç»­ç›‘æ§AIæ•ˆæœï¼Œå®šæœŸä¼˜åŒ–

---

**Python + FastAPI + AI = è¯—è¯å¹³å°çš„æœ€ä½³é€‰æ‹©ï¼** ğŸ‰ğŸ¤–
